# Ethical Optimization of Stock Portfolios

**Advisor:** Dr. Mario Alberto Navarro Velázquez, University of Guadalajara                                    
**Student:** Dante Alejandro Tostado Cortes, University of Sonora  
**Contact:** dantetostado@gmail.com

**Problem Statement**

Currently, many investment portfolios prioritize financial performance exclusively, neglecting the social, ethical, and environmental impacts of the companies involved. This limited view can perpetuate unsustainable business practices, such as the overexploitation of resources or support for industries with unfavorable working conditions.

In line with the Sustainable Development Goals, especially SDG 12 on responsible production and consumption, there is a need to develop models that integrate financial and sustainability criteria. This way, investors could align their decisions with ethical values, promoting more responsible markets.

However, there is still a shortage of tools that integrate environmental, social, and governance (ESG) metrics in a quantifiable way into stock optimization models. Furthermore, there are few studies that demonstrate whether it is possible to maintain profitability by including these criteria. This summer project seeks to design and evaluate a stock market optimization model that includes penalties for poor ESG performance, analyzing its impact on the financial viability of the portfolio. It proposes a financial engineering approach, applying computational methods to link social responsibility with performance, thus contributing to a more ethical and sustainable economic system.

**Study Methodology**

his study implemented a multi-objective stock market optimization model using a fitness function composed of the expected return, the ESG score, and a penalty term regulated by λ = 1.5, to balance profitability and liability, giving the following function:

-   $Fitness = \  - R^{2}\ \  + \ \ \lambda\  \cdot \ ESG\ Penalty$

The following ten metaheuristic algorithms were used for the research:
Genetic Algorithm (GA), Elitist GA, Adaptive GA, Adaptive/Elitist GA,
Diferential Evolution (DE), Black Hole Mechanics Optimization Algorithm
(BHMO), Particle Swarm Optimization (PSO), Covariance Matrix Adaptation
Evolution Strategy (CMA-ES), Simulated Annealing (SA) and Firefly
Algorithm (FA).

A dataset covering the 2020-2024 period was used for training, obtaining adjusted price information and ESG (Environmental, Social, and Governance) scores for each asset, with a special emphasis on the environmental pillar. For validation, the period from January to June 2025 was used as the benchmarking phase.

The objective function was to maximize the coefficient of determination 
$R^{2}$, considered an indicator of the fit between portfolio weights and their expected financial performance. This decision is justified by its ability to capture the explanatory relationship of the model, as well as allowing for a robust comparison between methods without directly relying on outlier-sensitive indicators such as the average return or the Sharpe ratio.

Each algorithm was run 15 times, recording the key metrics: fitness, average ESG score, annualized return, and Sharpe ratio. The means and standard deviations allowed us to analyze the stability and efficiency of each method.

**Study headquarters**

University Center for Exact and Natural Sciences (CUCEI) of the University of Guadalajara, under the direction of Dr. Mario Alberto Navarro Velázquez

**Análisis de Resultados**

Among the most notable results, CMA-ES obtained the highest average fitness (77.71%), followed by DE (75.54%), indicating a strong ability to adjust to the benchmark with a good ESG commitment. In sustainability, CMA-ES obtained the lowest average ESG risk score (12.40), where a lower score reflects a lower risk that the company's value will be affected by ESG factors. Typically, companies with low scores can be considered more ethical and environmentally sustainable.

The PSO also achieved a low average ESG risk (13.68). Despite its difficulties in maintaining consistently high returns, DE was not far behind, with an average ESG risk of 14.00, without the same difficulties.

In terms of annualized return compared to the benchmark, DE led with 17.204%, followed by CMA-ES. Both the FA and the PSO tended to overestimate both their return and Sharpe in all iterations, but the PSO achieved the highest Sharpe in the experiment, at 0.9716. This demonstrates the PSO's capability, but also its lack of consistency, as it also has some of the lowest Sharpe ratios.

**MDD phenomenon**

One phenomenon observed in the training results was a significantly high Maximum Drawdown in several portfolios generated by the algorithms. This could be explained by the fact that the training period spans from 2020 to 2024, a period that includes the global financial crisis generated by the COVID-19 pandemic in 2020. This event caused high volatility and abrupt declines in the financial markets, which is naturally reflected in metrics such as the MDD. In contrast, when evaluating the portfolios on real data from the first half of 2025, a substantial improvement is observed in most risk metrics, reinforcing the hypothesis that the atypical volatility of historical data does not necessarily represent the actual performance expected under more stable conditions.

**Conclusions**

During the development of this project, advanced metaheuristic optimization techniques and quantitative analysis of ESG portfolios were applied. Different evolutionary and bio-inspired algorithms were implemented and compared—such as variants of GA, DE, PSO,
BHMO, SA, FA & CMA-ES—evaluated using an objective function based on maximizing the coefficient of determination R². This metric allowed measuring the capacity of the generated weights to capture portfolio variance, offering a more general and comparable evaluation than other traditional financial metrics.

Despite the high volatility of the training period (2020–2024), which included the COVID-19 crisis, clear differences were observed in the algorithms' performance. Some stood out for their returns and ESG diversification levels, while others, with less adjustment (lower R²), showed greater stability in the 2025 benchmark, which suggests practical applications depending on the investor profile.

In conclusion, metaheuristic techniques proved to be a useful tool for building balanced ESG portfolios, promoting the integration of computational intelligence in finance and contributing to the achievement of the Sustainable Development Goals (SDGs), especially in innovation (SDG 9) and responsible production (SDG 12).


Bibliography
1. Shahvaroughi Farahani, M., Razavi Hajiagha, S.H. Forecasting stock price using integrated artificial neural network and metaheuristic algorithms compared to time series models. Soft Comput 25, 8483–8513 (2021). https://doi.org/10.1007/s00500-021-05775-5
2. Domínguez, Amparo & Juan, Angel & Kizys, Renatas. (2017). A Survey on Financial Applications of Metaheuristics. ACM Computing Surveys. 50. 1-23. 10.1145/3054133.
3. Macedo, L.L., Godinho, P. & Alves, M.J. A Comparative Study of Technical Trading Strategies Using a Genetic Algorithm. Comput Econ 55, 349–381 (2020). https://doi.org/10.1007/s10614-016-9641-9
